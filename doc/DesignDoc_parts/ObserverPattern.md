# ***\*3.16.Observer Pattern观察者模式\****

## ***\*设计模式简述\****

  在现实世界中，许多对象并不是独立存在的，其中一个对象的行为发生改变可能会导致一个或者多个其他对象的行为也发生改变。例如，某种商品的物价上涨时会导致部分商家高兴，而消费者伤心；还有，当我们开车到交叉路口时，遇到红灯会停，遇到绿灯会行。这样的例子还有很多，例如，股票价格与股民、微信公众号与微信用户、气象局的天气预报与听众、小偷与警察等。

  在软件世界也是这样，例如，Excel 中的数据与折线图、饼状图、柱状图之间的关系；MVC 模式中的模型与视图的关系；事件模型中的事件源与事件处理者。所有这些，如果用观察者模式来实现就非常方便。

## ***\*3.16.1 Supply实现API\****

### ***\*3.16.1.1 API描述\****

  仓库中的各类物品对于农场的正常工作是非常重要的，我们需要保证各类物资都有足够的储备来应对每天的消耗，但是，我们没有那么多空闲去不停地检查仓库中剩余的物资数量是否足够，因此，我们需要一种方法来在物资被消耗到较低水平时提醒我们。

  使用Observer设计模式能够完美解决我们的问题，我们会为这些重要的物资分别设置观察者以在这些物资出现短缺时向我们发出警告。

| 函数名     | 作用                                             |
| ---------- | ------------------------------------------------ |
| response() | 作为Observer的响应函数，会在满足条件时发出警告。 |
| add()      | 为Storage添加观察者。                            |
| remove()   | 从Storage移除观察者。                            |
| consume()  | 消耗number数量的库存，并且会向观察者发出提醒。   |

 

### ***\*3.16.1.2类图\****

### ***\*3.16.1.3流程图\****

### ***\*3.16.1.4时序图\****